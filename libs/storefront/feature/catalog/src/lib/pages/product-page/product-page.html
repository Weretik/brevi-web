<lib-page-header [config]="productPageConfig" />

<div class="bg-brand-bg dark:bg-surface-950 px-6 py-20 md:px-12 lg:px-20">
  <div class="flex flex-col lg:flex-row gap-8 mb-16 lg:items-start">
    <div class="flex-1 flex gap-4 lg:max-w-none">
      <div class="hidden sm:flex flex-col gap-4 lg:min-w-24">
        @for (image of images; track image; let i = $index) {
          <img
            [src]="
              'https://fqjltiegiezfetthbags.supabase.co/storage/v1/object/public/block.images/blocks/ecommerce/productoverview/' +
              image
            "
            class="w-24 h-28 rounded-lg cursor-pointer transition-all duration-150 object-cover"
            [class]="
              selectedImageIndex === i
                ? 'shadow-[0_0_0_2px] shadow-surface-900 dark:shadow-surface-0 ring-2 ring-surface-900 dark:ring-surface-0 ring-offset-2 ring-offset-surface-0 dark:ring-offset-surface-950'
                : ''
            "
            (click)="selectedImageIndex = i"
            alt="Product thumbnail"
          />
        }
      </div>
      <div class="flex-1">
        <img
          [src]="
            'https://fqjltiegiezfetthbags.supabase.co/storage/v1/object/public/block.images/blocks/ecommerce/productoverview/' +
            images[selectedImageIndex]
          "
          class="w-full h-auto lg:max-h-[31.28rem] lg:min-w-132 lg:max-w-132 rounded-lg"
          alt="Product main image"
        />

        <div class="flex gap-2 sm:hidden h-32 mt-4">
          @for (image of images; track image; let i = $index) {
            <img
              [src]="
                'https://fqjltiegiezfetthbags.supabase.co/storage/v1/object/public/block.images/blocks/ecommerce/productoverview/' +
                image
              "
              class="flex-1 min-w-16 sm:min-w-20 md:min-w-24 h-auto max-h-28 object-cover rounded-md sm:rounded-lg cursor-pointer transition-all duration-150"
              [class]="
                selectedImageIndex === i
                  ? 'shadow-[0_0_0_2px] shadow-surface-900 dark:shadow-surface-0 ring-2 ring-surface-900 dark:ring-surface-0 ring-offset-1 sm:ring-offset-2 ring-offset-surface-0 dark:ring-offset-surface-950'
                  : ''
              "
              (click)="selectedImageIndex = i"
              alt="Product thumbnail"
            />
          }
        </div>
      </div>
    </div>

    <div class="flex-1 w-full p-5 flex flex-col gap-8">
      <div class="flex flex-col gap-4">
        <div class="flex items-start gap-4">
          <h1
            class="flex-1 text-surface-900 dark:text-surface-0 text-xl font-semibold leading-tight"
          >
            RidgeTrail Modular Camera Backpack
          </h1>
        </div>
        <div class="flex items-center justify-between gap-4">
          <div class="text-surface-900 dark:text-surface-0 text-2xl font-normal leading-tight">
            $279
          </div>
          <div class="flex items-center gap-4">
            <div class="flex items-center gap-1">
              <i class="pi pi-star-fill text-sm! leading-none! text-yellow-500"></i>
              <i class="pi pi-star-fill text-sm! leading-none! text-yellow-500"></i>
              <i class="pi pi-star-fill text-sm! leading-none! text-yellow-500"></i>
              <i class="pi pi-star-fill text-sm! leading-none! text-yellow-500"></i>
              <i
                class="pi pi-star text-sm! leading-none! text-surface-400 dark:text-surface-500"
              ></i>
            </div>
            <div class="text-xs leading-tight">
              <span class="font-bold text-surface-900 dark:text-surface-0">58 </span>
              <span class="text-surface-500 dark:text-surface-400">reviews</span>
            </div>
          </div>
        </div>
      </div>

      <div class="flex flex-col gap-4">
        <div class="text-surface-900 dark:text-surface-0 text-sm font-semibold leading-tight">
          Color
        </div>
        <div class="flex items-center gap-4">
          <div
            class="w-7 h-7 rounded-full bg-zinc-900 cursor-pointer transition-all duration-150 outline outline-2 outline-surface-0 dark:outline-surface-950"
            [class]="
              color === 'black'
                ? 'ring-2 ring-zinc-900 ring-offset-2 ring-offset-surface-0 dark:ring-offset-surface-950'
                : ''
            "
            (click)="color = 'black'"
          ></div>
          <div
            class="w-7 h-7 rounded-full bg-zinc-500 cursor-pointer transition-all duration-150 outline outline-2 outline-surface-0 dark:outline-surface-950"
            [class]="
              color === 'gray'
                ? 'ring-2 ring-zinc-500 ring-offset-2 ring-offset-surface-0 dark:ring-offset-surface-950'
                : ''
            "
            (click)="color = 'gray'"
          ></div>
          <div
            class="w-7 h-7 rounded-full bg-zinc-300 cursor-pointer transition-all duration-150 outline outline-2 outline-surface-0 dark:outline-surface-950"
            [class]="
              color === 'light'
                ? 'ring-2 ring-zinc-300 ring-offset-2 ring-offset-surface-0 dark:ring-offset-surface-950'
                : ''
            "
            (click)="color = 'light'"
          ></div>
        </div>
      </div>

      <div class="flex flex-col gap-4">
        <div class="flex items-center gap-4">
          <div
            class="flex-1 text-surface-900 dark:text-surface-0 text-sm font-semibold leading-tight"
          >
            Size
          </div>
        </div>
        <div class="flex items-center gap-3">
          <div
            [class]="
              [
                'py-2 px-4 rounded-md cursor-pointer transition-all duration-150 text-sm font-normal leading-normal',
                size === '10L'
                  ? 'bg-primary-50 dark:bg-primary-900/20 outline outline-2 outline-primary text-primary'
                  : 'outline outline-1 outline-surface-200 dark:outline-surface-700 text-surface-900 dark:text-surface-0 hover:bg-surface-50 dark:hover:bg-surface-800',
              ].join(' ')
            "
            (click)="size = '10L'"
          >
            10L
          </div>
          <div
            [class]="
              [
                'py-2 px-4 rounded-md cursor-pointer transition-all duration-150 text-sm font-normal leading-normal',
                size === '15L'
                  ? 'bg-primary-50 dark:bg-primary-900/20 outline outline-2 outline-primary text-primary'
                  : 'outline outline-1 outline-surface-200 dark:outline-surface-700 text-surface-900 dark:text-surface-0 hover:bg-surface-50 dark:hover:bg-surface-800',
              ].join(' ')
            "
            (click)="size = '15L'"
          >
            15L
          </div>
          <div
            [class]="
              [
                'py-2 px-4 rounded-md cursor-pointer transition-all duration-150 text-sm font-normal leading-normal',
                size === '20L'
                  ? 'bg-primary-50 dark:bg-primary-900/20 outline outline-2 outline-primary text-primary'
                  : 'outline outline-1 outline-surface-200 dark:outline-surface-700 text-surface-900 dark:text-surface-0 hover:bg-surface-50 dark:hover:bg-surface-800',
              ].join(' ')
            "
            (click)="size = '20L'"
          >
            20L
          </div>
          <div
            [class]="
              [
                'py-2 px-4 rounded-md cursor-pointer transition-all duration-150 text-sm font-normal leading-normal',
                size === '25L'
                  ? 'bg-primary-50 dark:bg-primary-900/20 outline outline-2 outline-primary text-primary'
                  : 'outline outline-1 outline-surface-200 dark:outline-surface-700 text-surface-900 dark:text-surface-0 hover:bg-surface-50 dark:hover:bg-surface-800',
              ].join(' ')
            "
            (click)="size = '25L'"
          >
            25L
          </div>
          <div
            class="opacity-20"
            [class]="
              [
                'py-2 px-4 rounded-md cursor-pointer transition-all duration-150 text-sm font-normal leading-normal',
                size === '30L'
                  ? 'bg-primary-50 dark:bg-primary-900/20 outline outline-2 outline-primary text-primary'
                  : 'outline outline-1 outline-surface-200 dark:outline-surface-700 text-surface-900 dark:text-surface-0',
              ].join(' ')
            "
          >
            30L
          </div>
        </div>
      </div>

      <div class="flex flex-col gap-8">
        <div class="flex flex-col gap-4">
          <div class="text-surface-900 dark:text-surface-0 text-sm font-semibold leading-tight">
            Quantity
          </div>
          <p-inputnumber
            [(ngModel)]="quantity"
            [showButtons]="true"
            buttonLayout="horizontal"
            spinnerMode="horizontal"
            [min]="0"
            class="w-32"
            inputStyleClass="w-12 text-center"
            decrementButtonClass="p-button-text"
            incrementButtonClass="p-button-text"
            incrementButtonIcon="pi pi-plus"
            decrementButtonIcon="pi pi-minus"
          ></p-inputnumber>
        </div>
        <div class="flex items-center gap-4">
          <button
            pButton
            class="flex-1 py-2! px-4! bg-surface-900! dark:bg-surface-0! text-surface-0! dark:text-surface-900! border-surface-900! dark:border-surface-0! rounded-md! font-medium! text-sm!"
          >
            <span pButtonLabel>Add to Cart</span>
          </button>
          <button
            pButton
            class="w-9! h-9! p-2! bg-surface-100! dark:bg-surface-800! text-surface-600! dark:text-surface-300! border-surface-100! dark:border-surface-800! rounded-full! min-w-0"
            (click)="liked = !liked"
          >
            <i
              pButtonIcon
              [ngClass]="['pi', 'pi-heart', liked ? 'text-pink-500! dark:text-pink-400!' : '']"
            ></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="flex flex-col gap-8">
    <div class="flex flex-col gap-2">
      <div class="flex items-end bg-surface-0 dark:bg-surface-950">
        <div
          class="bg-surface-0 dark:bg-surface-950 rounded-t-md flex flex-col cursor-pointer transition-colors duration-150"
          (click)="activeTab = 0"
        >
          <div class="py-5 px-5 flex items-center gap-2">
            <div
              class="text-base font-bold leading-tight"
              [class]="activeTab === 0 ? 'text-primary' : 'text-surface-500 dark:text-surface-400'"
            >
              Details
            </div>
          </div>
          <div
            class="h-0.5"
            [class]="activeTab === 0 ? 'bg-primary' : 'bg-surface-200 dark:bg-surface-700'"
          ></div>
        </div>
        <div
          class="bg-surface-0 dark:bg-surface-950 rounded-t-md flex flex-col cursor-pointer transition-colors duration-150"
          (click)="activeTab = 1"
        >
          <div class="py-5 px-5 flex items-center gap-2">
            <div
              class="text-base font-semibold leading-tight"
              [class]="activeTab === 1 ? 'text-primary' : 'text-surface-500 dark:text-surface-400'"
            >
              Reviews
            </div>
          </div>
          <div
            class="h-0.5"
            [class]="activeTab === 1 ? 'bg-primary' : 'bg-surface-200 dark:bg-surface-700'"
          ></div>
        </div>
        <div
          class="bg-surface-0 dark:bg-surface-950 rounded-t-md flex flex-col cursor-pointer transition-colors duration-150"
          (click)="activeTab = 2"
        >
          <div class="py-5 px-5 flex items-center gap-2">
            <div
              class="text-base font-semibold leading-tight"
              [class]="activeTab === 2 ? 'text-primary' : 'text-surface-500 dark:text-surface-400'"
            >
              Shipping
            </div>
          </div>
          <div
            class="h-0.5"
            [class]="activeTab === 2 ? 'bg-primary' : 'bg-surface-200 dark:bg-surface-700'"
          ></div>
        </div>
        <div class="flex-1 h-0.5 bg-surface-200 dark:bg-surface-700"></div>
      </div>
    </div>

    <div class="flex flex-col gap-6">
      @if (activeTab === 0) {
        <div class="flex flex-col gap-4">
          <div class="flex flex-col gap-4">
            <h3 class="text-surface-900 dark:text-surface-0 text-2xl font-medium leading-tight">
              Made to Move
            </h3>
            <p class="text-surface-500 dark:text-surface-400 text-base font-normal leading-normal">
              Built for adventure and designed for creators, the RidgeTrail Modular Camera Backpack
              keeps your gear protected, organized, and ready for any terrain.<br />
              Whether you're hiking remote landscapes or navigating urban shoots, this bag delivers
              durability without compromise.
            </p>
          </div>

          <div class="flex flex-col md:flex-row gap-2">
            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Highlights
              </h4>
              <ul
                class="pl-4 text-surface-500 dark:text-surface-400 font-normal list-disc space-y-1"
              >
                <li>Customizable interior dividers for total control</li>
                <li>Side-access zipper for fast lens swaps</li>
                <li>Weather-resistant shell with reinforced stitching</li>
              </ul>
            </div>

            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Size and Fit
              </h4>
              <div class="flex flex-col gap-2">
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >10L Mirrorless Kit:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Fits 1 mirrorless body + 2–3 lenses</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >15L Compact DSLR:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Fits DSLR + 2–3 lenses</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >20L DSLR Standard:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Fits DSLR + 3–5 lenses + flash</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >25L Pro:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Full-frame DSLR + 6+ lenses + tripod</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >30L Pro Max:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Drone space + accessory compartments</span
                  >
                </div>
              </div>
            </div>

            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Material & Care
              </h4>
              <div class="flex gap-2">
                <div class="flex-1 p-2 flex flex-col gap-4">
                  <div class="flex items-center gap-2">
                    <i
                      class="pi pi-sun text-base! leading-none! text-surface-700 dark:text-surface-200"
                    ></i>
                    <span
                      class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                      >Not dryer safe</span
                    >
                  </div>
                  <div class="flex items-center gap-2">
                    <i
                      class="pi pi-sliders-h text-base! leading-none! text-surface-700 dark:text-surface-200"
                    ></i>
                    <span
                      class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                      >Iron medium heat</span
                    >
                  </div>
                </div>
                <div class="flex-1 p-2 flex flex-col gap-4">
                  <div class="flex items-center gap-2">
                    <i
                      class="pi pi-times-circle text-base! leading-none! text-surface-700 dark:text-surface-200"
                    ></i>
                    <span
                      class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                      >No chemical wash</span
                    >
                  </div>
                  <div class="flex items-center gap-2">
                    <i
                      class="pi pi-minus-circle text-base! leading-none! text-surface-700 dark:text-surface-200"
                    ></i>
                    <span
                      class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                      >Dry flat</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      }

      @if (activeTab === 1) {
        <div class="flex flex-col gap-4">
          <div class="flex flex-col gap-4">
            <h3 class="text-surface-900 dark:text-surface-0 text-2xl font-medium leading-tight">
              Customer Reviews
            </h3>
            <p class="text-surface-500 dark:text-surface-400 text-base font-normal leading-normal">
              See what our customers are saying about the RidgeTrail Modular Camera Backpack.
            </p>
          </div>

          <div class="flex flex-col gap-4">
            @for (review of reviews; track review.name; let idx = $index) {
              <div
                class="self-stretch p-4 rounded-xl bg-surface-0 dark:bg-surface-950 flex flex-col gap-4"
              >
                <div class="flex items-center gap-4">
                  <div class="flex-1 flex items-center gap-4">
                    <img [src]="review.avatar" class="w-12 h-12 rounded-full" [alt]="review.name" />
                    <div class="flex-1 flex flex-col">
                      <span
                        class="text-surface-900 dark:text-surface-0 text-base font-medium leading-tight"
                        >{{ review.name }}</span
                      >
                      <span class="text-surface-400 dark:text-surface-500 text-sm font-medium">{{
                        review.date
                      }}</span>
                    </div>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="flex items-start gap-1">
                      @for (n of [1, 2, 3, 4, 5]; track n) {
                        <i
                          [class]="
                            [
                              'pi',
                              n <= review.rating
                                ? 'pi-star-fill text-yellow-500'
                                : 'pi-star text-surface-300 dark:text-surface-600',
                              'text-sm! leading-none!',
                            ].join(' ')
                          "
                        ></i>
                      }
                    </div>
                    <span
                      class="text-surface-900 dark:text-surface-0 text-base font-medium leading-tight"
                      >{{ review.rating }}</span
                    >
                  </div>
                </div>
                <p
                  class="text-surface-700 dark:text-surface-300 text-base font-normal leading-normal"
                >
                  {{ review.comment }}
                </p>
              </div>

              @if (idx < reviews.length - 1) {
                <div class="w-full h-px bg-surface-200 dark:bg-surface-700"></div>
              }
            }
          </div>
        </div>
      }

      @if (activeTab === 2) {
        <div class="flex flex-col gap-4">
          <div class="flex flex-col gap-4">
            <h3 class="text-surface-900 dark:text-surface-0 text-2xl font-medium leading-tight">
              Shipping Information
            </h3>
            <p class="text-surface-500 dark:text-surface-400 text-base font-normal leading-normal">
              Free shipping on orders over $200. All orders are processed within 1-2 business days
              and shipped via reliable carriers with tracking information provided.
            </p>
          </div>

          <div class="flex flex-col md:flex-row gap-2">
            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Shipping Costs
              </h4>
              <ul
                class="pl-4 text-surface-500 dark:text-surface-400 font-normal list-disc space-y-1"
              >
                <li>Standard (5-7 days) - $9.99</li>
                <li>Express (2-3 days) - $19.99</li>
                <li>Overnight - $39.99</li>
                <li>International - Starting at $29.99</li>
              </ul>
            </div>

            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Return Policy
              </h4>
              <p
                class="text-surface-500 dark:text-surface-400 text-base font-normal leading-normal"
              >
                30-day return policy. Items must be in original condition with all tags attached.
                Return shipping is free for defective items.
              </p>
            </div>

            <div class="flex-1 p-4 flex flex-col gap-4">
              <h4 class="text-surface-900 dark:text-surface-0 text-xl font-medium leading-tight">
                Delivery Options
              </h4>
              <div class="flex flex-col gap-2">
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >Same Day:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Available in select cities</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >Pickup:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Free at our retail locations</span
                  >
                </div>
                <div>
                  <span
                    class="text-surface-700 dark:text-surface-200 text-base font-medium leading-tight"
                    >Gift Wrapping:</span
                  >
                  <span
                    class="text-surface-500 dark:text-surface-400 text-base font-normal leading-tight"
                  >
                    Available for $4.99</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</div>
